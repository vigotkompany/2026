<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#ViGotKOMpany | The Saga</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=MedievalSharp&family=Great+Vibes&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --royal-red: #641212;
            --gold: #ffd700;
            --parchment: #fdfaf0;
            --tape-color: rgba(210, 194, 164, 0.5);
        }

        body, html { margin: 0; padding: 0; background: var(--parchment); height: 100vh; font-family: 'MedievalSharp', serif; overflow: hidden; touch-action: none; }
        
        #cover { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--royal-red); color: white; z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; transition: transform 0.9s cubic-bezier(0.4, 0, 0.2, 1); }
        .hide-cover { transform: translateY(-100%); pointer-events: none; }
        
        .title { font-family: 'Cinzel Decorative', serif; font-size: clamp(2rem, 6vw, 3.5rem); color: var(--gold); margin: 10px; }

        #story-container { 
            width: 100%; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            background-image: radial-gradient(#d2c2a4 0.6px, transparent 0.6px);
            background-size: 30px 30px;
        }
        
        .text-section { 
            width: 100%;
            padding: 20px;
            text-align: center;
            z-index: 10;
            background: linear-gradient(to bottom, var(--parchment) 80%, transparent);
            box-sizing: border-box;
        }
        
        .drop-cap { font-family: 'Cinzel Decorative'; font-size: 3rem; color: var(--royal-red); float: left; line-height: 0.7; margin-right: 12px; }
        h2 { font-family: 'Cinzel Decorative'; color: var(--royal-red); margin: 0 0 5px; font-size: 1.5rem; border-bottom: 2px solid var(--gold); display: inline-block; }

        /* COLLAGE AREA */
        #collage-area {
            flex: 1;
            width: 100%;
            position: relative;
            overflow: hidden; /* Keeps photos from causing scrollbars */
        }

        .photo-frame { 
            position: absolute;
            background: #fff;
            padding: 10px 10px 30px 10px;
            box-shadow: 5px 15px 30px rgba(0,0,0,0.15);
            border: 1px solid #eee;
            width: clamp(160px, 32vw, 240px);
            cursor: grab;
            user-select: none;
            touch-action: none;
            transition: opacity 0.5s ease, transform 0.1s ease;
            /* Initial state for animation */
            opacity: 0;
            left: 50%;
            top: 50%;
        }

        .photo-frame:active { cursor: grabbing; z-index: 1000 !important; }

        .photo-frame::before {
            content: "";
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%) rotate(1deg);
            width: 60px;
            height: 20px;
            background: var(--tape-color);
            border-left: 1px dotted rgba(0,0,0,0.1);
            border-right: 1px dotted rgba(0,0,0,0.1);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .photo-frame img { width: 100%; height: auto; display: block; pointer-events: none; }

        /* NAV */
        .nav-wrapper {
            padding: 15px 0 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 100;
            background: linear-gradient(transparent, var(--parchment) 40%);
        }

        .nav-bar { display: flex; gap: 40px; font-family: 'Cinzel Decorative'; color: #ae9656; font-weight: bold; }
        .nav-bar span { cursor: pointer; padding: 10px; }
        #stat-footer { font-size: 0.7rem; color: #888; margin-top: 5px; text-transform: uppercase; letter-spacing: 2px; }

        #yes-btn { padding: 15px 60px; font-size: 1.3rem; cursor: pointer; background: white; color: var(--royal-red); border: none; border-radius: 50px; font-weight: bold; font-family: 'Cinzel Decorative'; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
        #no-btn { 
    position: absolute; /* Changed from fixed to absolute to keep it in the box */
    padding: 10px 30px; 
    cursor: pointer; 
    background: rgba(255,255,255,0.1); 
    color: white; 
    border: 1px solid rgba(255,255,255,0.5); 
    border-radius: 50px; 
    z-index: 1100; 
}
    </style>
</head>
<body>

    <div id="cover">
        <div style="font-family: 'Great Vibes'; font-size: 2rem; color: var(--gold);">The Chronicles of #ViGotKOMpany</div>
        <h1 class="title">Will You Enter?</h1>
        <div style="height: 150px; display: flex; align-items: center;">
            <button id="yes-btn" onclick="window.go()">YES</button>
            <button id="no-btn" onmouseover="window.dance()">NO</button>
        </div>
    </div>

    <div id="story-container">
        <div id="content-wrapper" class="text-section">
            <h2 id="st-title">The Closing Rank</h2>
            <div id="st-body">
                <p><span class="drop-cap">O</span>nce, at NIT Warangal, destiny used a 'closing rank' to write our first chapter.</p>
            </div>
        </div>

        <div id="collage-area"></div>

        <div class="nav-wrapper">
            <div class="nav-bar">
                <span id="prev" style="visibility:hidden" onclick="window.step(-1)">â†ž REGRET</span>
                <span id="next" onclick="window.step(1)">NEXT CHAOS âž”</span>
            </div>
            <div id="stat-footer">Current Status: Lab Partners ðŸ§¬</div>
        </div>
    </div>

    <script>
        let current = 0;
        let highestZ = 10;
        
        const chapters = [
            { t: "The Closing Rank", b: "<p>Once, at NIT Warangal, destiny used a 'closing rank' to write our first chapter. In a chaotic lab, you passed me your notes.</p>", imgs: ["5.jpeg", "6.jpeg"] },
            { t: "The Barista 'Non-Date'", b: "<p>In Nov 2017, we met for a 'treat.' We shared more than Samosasâ€”there were blushes, laughs, and a spark.</p>", imgs: ["1.jpeg", "2.jpeg", "3.jpeg", "4.jpeg"] },
            { t: "The Hillside Proposal", b: "<p>Ganesh Chaturthi 2018. Recreating 'Om Shanti Oshana' at the TV Tower hillâ€”in 35Â° heat and slippers!</p>", imgs: ["7.jpeg", "9.jpeg", "10.jpeg", "11.jpeg", "12.jpeg"] },
            { t: "Milestones", b: "<p>Intern, and beyond!</p>", imgs: ["13.jpeg", "14.jpeg","15.jpeg", "16.jpeg", "20.jpeg", "21.jpeg"] },
            { t: "The NEVER Ending Long Distance", b: "<p>We survived it!</p>", imgs: ["22.jpeg","23.jpeg","24.jpeg","25.jpeg","26.jpeg","27.jpeg","28.jpeg","29.jpeg"] },
            { t: "The Wedding 2025", b: "<p><span class='drop-cap'>W</span>e traded lab coats for Kanjivarams. #(NOT)VIMAL officially became #ViGotKOMpany.</p>", imgs: ["30.jpeg","31.jpeg","32.jpeg"] }
        ];

        window.go = () => document.getElementById('cover').classList.add('hide-cover');
        window.dance = () => {
            const no = document.getElementById('no-btn');
            no.style.left = Math.random() * 70 + 15 + "%";
            no.style.top = Math.random() * 70 + 15 + "%";
        };

        function scatterImages(imgs) {
            const area = document.getElementById('collage-area');
            area.innerHTML = '';
            
            // Get dimensions of the area to find true center
            const rect = area.getBoundingClientRect();
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;

            imgs.forEach((src, i) => {
                const frame = document.createElement('div');
                frame.className = 'photo-frame';
                
                // Controlled random toss within the central 40% of the area
                const rotation = Math.floor(Math.random() * 20) - 10;
                const offsetX = (Math.random() - 0.5) * (rect.width * 0.4);
                const offsetY = (Math.random() - 0.5) * (rect.height * 0.3);

                // Set initial position
                frame.style.left = `${centerX + offsetX - 100}px`; // -100 to roughly center the frame itself
                frame.style.top = `${centerY + offsetY - 100}px`;
                frame.style.zIndex = i + 1;

                frame.innerHTML = `<img src="${src}">`;
                area.appendChild(frame);

                // Entrance animation
                setTimeout(() => {
                    frame.style.opacity = '1';
                    frame.style.transform = `rotate(${rotation}deg)`;
                }, i * 150);

                // Draggable logic
                let isDragging = false;
                let startX, startY, initialLeft, initialTop;

                const start = (e) => {
                    isDragging = true;
                    frame.style.zIndex = ++highestZ;
                    const touch = e.type === 'touchstart' ? e.touches[0] : e;
                    startX = touch.clientX;
                    startY = touch.clientY;
                    initialLeft = frame.offsetLeft;
                    initialTop = frame.offsetTop;
                };

                const move = (e) => {
                    if (!isDragging) return;
                    const touch = e.type === 'touchmove' ? e.touches[0] : e;
                    const dx = touch.clientX - startX;
                    const dy = touch.clientY - startY;
                    frame.style.left = (initialLeft + dx) + 'px';
                    frame.style.top = (initialTop + dy) + 'px';
                };

                const stop = () => isDragging = false;

                frame.addEventListener('mousedown', start);
                frame.addEventListener('touchstart', start, {passive: true});
                window.addEventListener('mousemove', move);
                window.addEventListener('touchmove', move, {passive: false});
                window.addEventListener('mouseup', stop);
                window.addEventListener('touchend', stop);
            });
        }

        // Initialize first chapter
        window.addEventListener('load', () => scatterImages(chapters[0].imgs));

        window.step = (dir) => {
            current += dir;
            const ch = chapters[current];
            document.getElementById('st-title').innerText = ch.t;
            document.getElementById('st-body').innerHTML = ch.b;
            scatterImages(ch.imgs);
            document.getElementById('prev').style.visibility = current === 0 ? 'hidden' : 'visible';
            document.getElementById('next').style.visibility = current === chapters.length - 1 ? 'hidden' : 'visible';
        };
    </script>
</body>
</html>
