<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#ViGotKOMpany | The Storybook</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=MedievalSharp&family=Great+Vibes&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --royal-red: #641212;
            --gold: #ffd700;
            --parchment: #fdfaf0;
            --page-shadow: rgba(0,0,0,0.2);
        }

        body, html { 
            margin: 0; padding: 0; background: #2c0505; 
            height: 100vh; font-family: 'MedievalSharp', serif; 
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; touch-action: none;
        }

        /* THE BOOK FRAME */
        #storybook {
            width: 90vw;
            height: 85vh;
            max-width: 1000px;
            background: var(--parchment);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5), inset 5px 0 15px rgba(0,0,0,0.1);
            display: flex;
            position: relative;
            border-radius: 5px 15px 15px 5px;
            perspective: 2000px;
        }

        /* SPINE SHADOW */
        #storybook::before {
            content: "";
            position: absolute;
            left: 50%;
            width: 30px;
            height: 100%;
            background: linear-gradient(to right, transparent, rgba(0,0,0,0.1) 50%, transparent);
            transform: translateX(-50%);
            z-index: 20;
            pointer-events: none;
        }

        /* COVER PAGE */
        #cover {
            position: absolute;
            width: 100%; height: 100%;
            background: var(--royal-red);
            color: white;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
            transform-origin: left;
            border-left: 10px solid #4a0d0d;
            box-shadow: 10px 0 20px rgba(0,0,0,0.3);
        }

        .cover-open { transform: rotateY(-110deg); pointer-events: none; }

        /* PAGES */
        .page {
            width: 50%;
            height: 100%;
            padding: 40px;
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
        }

        /* LEFT PAGE (Text) */
        #left-page { border-right: 1px solid rgba(0,0,0,0.05); }
        .drop-cap { font-family: 'Cinzel Decorative'; font-size: 3.5rem; color: var(--royal-red); float: left; line-height: 0.7; margin-right: 12px; }
        h2 { font-family: 'Cinzel Decorative'; color: var(--royal-red); border-bottom: 2px solid var(--gold); }

        /* RIGHT PAGE (Scrapbook) */
        #right-page { background: #f9f6ed; }
        #collage-area { width: 100%; height: 100%; position: relative; }

        .photo-frame {
            position: absolute;
            background: #fff;
            padding: 10px 10px 25px 10px;
            box-shadow: 3px 8px 15px rgba(0,0,0,0.2);
            width: 180px;
            cursor: grab;
            transition: opacity 0.5s ease;
        }
        .photo-frame img { width: 100%; height: auto; display: block; }

        /* ANIMATIONS */
        .page-flip-overlay {
            position: absolute;
            top: 0; right: 0; width: 50%; height: 100%;
            background: var(--parchment);
            z-index: 50;
            transform-origin: left;
            transition: transform 0.8s ease-in-out;
            pointer-events: none;
            box-shadow: inset 10px 0 20px rgba(0,0,0,0.1);
        }
        .flipping { transform: rotateY(-180deg); }

        /* BUTTONS */
        .nav-btns {
            position: absolute; bottom: 20px; width: 100%;
            display: flex; justify-content: center; gap: 100px;
            font-family: 'Cinzel Decorative'; font-weight: bold; color: #ae9656;
        }
        .nav-btns span { cursor: pointer; z-index: 100; }

        #yes-btn { 
            background: var(--gold); color: var(--royal-red); 
            border: none; padding: 15px 40px; font-size: 1.5rem; 
            font-family: 'Cinzel Decorative'; cursor: pointer; border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        #no-btn { 
            position: absolute; background: rgba(255,255,255,0.2); 
            border: 1px solid white; color: white; padding: 5px 15px; 
            border-radius: 20px; cursor: pointer;
        }

    </style>
</head>
<body>

    <div id="storybook">
        <div id="cover">
            <div style="font-family: 'Great Vibes'; font-size: 2.5rem; color: var(--gold);">The Chronicles of</div>
            <h1 style="font-family: 'Cinzel Decorative'; font-size: 3.5rem; margin: 10px;">ViGotKOMpany</h1>
            <div style="height: 120px; position: relative; width: 300px;">
                <button id="yes-btn" onclick="openBook()">OPEN SAGA</button>
                <button id="no-btn" onmouseover="moveNo()">NO</button>
            </div>
        </div>

        <div class="page" id="left-page">
            <h2 id="st-title">The Closing Rank</h2>
            <div id="st-body">
                <p><span class="drop-cap">O</span>nce, at NIT Warangal, destiny used a 'closing rank' to write our first chapter. In a chaotic lab, you passed me your notes.</p>
            </div>
        </div>

        <div class="page" id="right-page">
            <div id="collage-area"></div>
        </div>

        <div id="page-overlay" class="page-flip-overlay"></div>

        <div class="nav-btns">
            <span id="prev" style="visibility:hidden" onclick="changeChapter(-1)">↞ PREVIOUS</span>
            <span id="next" onclick="changeChapter(1)">NEXT CHAPTER ➔</span>
        </div>
    </div>

    <script>
        let current = 0;
        let highestZ = 100;

        const chapters = [
            { t: "The Closing Rank", b: "<p>Once, at NIT Warangal, destiny used a 'closing rank' to write our first chapter. In a chaotic lab, you passed me your notes.</p>", imgs: ["5.jpeg", "6.jpeg"] },
            { t: "The Barista 'Non-Date'", b: "<p>In Nov 2017, we met for a 'treat.' We shared more than Samosas—there were blushes, laughs, and a spark.</p>", imgs: ["1.jpeg", "2.jpeg", "3.jpeg", "4.jpeg"] },
            { t: "The Hillside Proposal", b: "<p>Ganesh Chaturthi 2018. Recreating 'Om Shanti Oshana' at the TV Tower hill—in 35° heat and slippers!</p>", imgs: ["7.jpeg", "9.jpeg", "10.jpeg", "11.jpeg", "12.jpeg"] },
            { t: "Milestones", b: "<p>Intern, and beyond!</p>", imgs: ["13.jpeg", "14.jpeg","15.jpeg", "16.jpeg", "20.jpeg", "21.jpeg"] },
            { t: "The NEVER Ending Long Distance", b: "<p>We survived it!</p>", imgs: ["22.jpeg","23.jpeg","24.jpeg","25.jpeg","26.jpeg","27.jpeg","28.jpeg","29.jpeg"] },
            { t: "The Wedding 2025", b: "<p><span class='drop-cap'>W</span>e traded lab coats for Kanjivarams. #(NOT)VIMAL officially became #ViGotKOMpany.</p>", imgs: ["30.jpeg","31.jpeg","32.jpeg"] }
        ];

        function openBook() {
            document.getElementById('cover').classList.add('cover-open');
            scatterImages(chapters[0].imgs);
        }

        function moveNo() {
            const btn = document.getElementById('no-btn');
            btn.style.left = Math.random() * 200 + "px";
            btn.style.top = Math.random() * 100 + "px";
        }

        function scatterImages(imgs) {
            const area = document.getElementById('collage-area');
            area.innerHTML = '';
            const rect = area.getBoundingClientRect();

            imgs.forEach((src, i) => {
                const frame = document.createElement('div');
                frame.className = 'photo-frame';
                const rotation = Math.random() * 20 - 10;
                
                // Position around center of the right page
                frame.style.left = (rect.width/2 - 90) + (Math.random() * 60 - 30) + "px";
                frame.style.top = (rect.height/2 - 100) + (Math.random() * 60 - 30) + "px";
                frame.style.transform = `rotate(${rotation}deg)`;
                frame.innerHTML = `<img src="${src}">`;
                
                area.appendChild(frame);
                makeDraggable(frame);
            });
        }

        function changeChapter(dir) {
            const overlay = document.getElementById('page-overlay');
            overlay.style.transition = "transform 0.8s ease-in-out";
            overlay.classList.add('flipping');

            setTimeout(() => {
                current += dir;
                const ch = chapters[current];
                document.getElementById('st-title').innerText = ch.t;
                document.getElementById('st-body').innerHTML = ch.b;
                scatterImages(ch.imgs);

                document.getElementById('prev').style.visibility = current === 0 ? 'hidden' : 'visible';
                document.getElementById('next').style.visibility = current === chapters.length - 1 ? 'hidden' : 'visible';
                
                overlay.style.transition = "none";
                overlay.classList.remove('flipping');
            }, 400);
        }

        function makeDraggable(el) {
            let isDragging = false, startX, startY, initL, initT;
            const start = (e) => {
                isDragging = true;
                el.style.zIndex = ++highestZ;
                const t = e.touches ? e.touches[0] : e;
                startX = t.clientX; startY = t.clientY;
                initL = el.offsetLeft; initT = el.offsetTop;
            };
            const move = (e) => {
                if (!isDragging) return;
                const t = e.touches ? e.touches[0] : e;
                el.style.left = (initL + t.clientX - startX) + "px";
                el.style.top = (initT + t.clientY - startY) + "px";
            };
            el.onmousedown = el.ontouchstart = start;
            window.onmousemove = window.ontouchmove = move;
            window.onmouseup = window.ontouchend = () => isDragging = false;
        }
    </script>
</body>
</html>
